<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Vocabulary & Writing Worksheet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0fdf4; /* green-50 */
        }
        .correct {
            border-color: #4ade80 !important; /* green-400 */
            background-color: #f0fdf4 !important; /* green-50 */
        }
        .incorrect {
            border-color: #f87171 !important; /* red-400 */
            background-color: #fef2f2 !important; /* red-50 */
        }
        .card {
            background-color: white;
            border-radius: 24px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
            overflow: hidden;
        }
        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            background-color: #f9fafb;
        }
        .card-content {
            padding: 1.5rem;
        }
        .progress-bar-container {
            width: 100%;
            background-color: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
            height: 16px;
        }
        .progress-bar {
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, #34d399, #6ee7b7);
            border-radius: 9999px;
            transition: width 0.5s ease-in-out;
        }
        /* Tab Styles */
        .tab-button {
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            color: #475569;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }
        .tab-button.active {
            color: #059669;
            border-bottom-color: #059669;
        }
        .tab-panel {
            display: none;
        }
        .tab-panel.active {
            display: block;
        }
        /* Drag and Drop Styles */
        .draggable {
            cursor: grab;
            padding: 0.5rem 1rem;
            background-color: #ccfbf1;
            color: #0f766e;
            border-radius: 8px;
            font-weight: 500;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .draggable.dragging {
            opacity: 0.5;
            transform: scale(1.05);
        }
        .drop-zone {
            border: 2px dashed #99f6e4;
            border-radius: 8px;
            min-height: 44px;
            transition: background-color 0.2s, border-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .drop-zone.drag-over {
            background-color: #a7f3d0;
            border-color: #10b981;
        }
        .drop-zone.correct-drop {
            background-color: #dcfce7;
            border-color: #22c55e;
        }
        .drop-zone.incorrect-drop {
            background-color: #fee2e2;
            border-color: #ef4444;
        }
        /* Vocab Info Styles */
        .vocab-info-btn {
            cursor: pointer;
            color: #64748b;
            margin-left: 0.5rem;
            font-weight: bold;
            border: 1px solid #cbd5e1;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.2s;
        }
        .vocab-info-btn:hover {
            background-color: #e2e8f0;
            color: #1e293b;
        }
        /* Modal Styles */
        #modal-backdrop {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
        }
        #modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 16px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="text-slate-800">

    <div id="main-content" class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-slate-900 tracking-tight">Vocabulary & Story Writing üìù</h1>
            <p class="mt-3 text-lg text-slate-600">Let's build your vocabulary and write an amazing story!</p>
        </header>
        
        <div class="card mb-8">
            <div class="card-content">
                <h2 class="text-lg font-bold mb-2 text-slate-700">Your Progress</h2>
                <div class="progress-bar-container"><div id="progress-bar" class="progress-bar"></div></div>
            </div>
        </div>

        <div class="card">
            <!-- Tabs -->
            <div class="border-b border-gray-200">
                <nav class="flex -mb-px" id="tab-buttons">
                    <button class="tab-button active" data-tab="vocab">üß† Vocabulary Power-Up</button>
                    <button class="tab-button" data-tab="writing">‚úçÔ∏è Become a Storyteller</button>
                </nav>
            </div>

            <!-- Tab Panels -->
            <div id="tab-panels">
                <!-- Vocabulary Panel -->
                <div id="vocab-panel" class="tab-panel active">
                    <div class="card-content space-y-8">
                        <div>
                            <h3 class="font-bold text-lg text-slate-700">Practice 1: Opposites Match-Up</h3>
                            <p class="text-slate-600 mb-4">Drag the words from the left to match their opposites on the right.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 interactive-group">
                                <div id="draggable-container" class="space-y-4"></div>
                                <div id="drop-container" class="space-y-2"></div>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-slate-700">Practice 2: Tell Me About It!</h3>
                            <p class="text-slate-600 mb-4">Write a short sentence for each prompt.</p>
                            <div class="space-y-4">
                                <div>
                                    <label class="font-semibold text-slate-600">Tell your partner about something strange that happened in a film you saw.</label>
                                    <input type="text" class="mt-1 w-full p-2 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition" placeholder="Type here...">
                                </div>
                                <div>
                                    <label class="font-semibold text-slate-600">...something fantastic that happened during the holidays.</label>
                                    <input type="text" class="mt-1 w-full p-2 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition" placeholder="Type here...">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Writing Panel -->
                <div id="writing-panel" class="tab-panel">
                    <div class="card-content space-y-8">
                        <div>
                            <h3 class="font-bold text-lg text-slate-700">Analyze the Task</h3>
                            <div class="my-2 p-4 bg-slate-100 rounded-lg border">
                                <p>Your English teacher has asked you to write a story. Your story must begin with this sentence:</p>
                                <p class="font-semibold mt-2">"Olivia read the message from her friend and smiled."</p>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-slate-700">Analyze the Story</h3>
                            <div class="my-2 p-4 bg-slate-100 rounded-lg border text-slate-700 leading-relaxed">
                                <p class="font-semibold">Olivia read the message from her friend and smiled.</p>
                                <p>She was excited because Ellie, who lived abroad, was coming to visit her this Friday!</p>
                                <p>Just as Olivia reached the airport to pick up Ellie, she received a call. 'There's thick fog here and my plane can't take off' explained Ellie. 'I'm not sure what'll happen.'</p>
                                <p>'I'm really disappointed,' replied Olivia.</p>
                                <p>As Olivia waited at the airport, she became quite miserable. But then, Ellie called again. 'The sky's cleared!' she said. Three hours later Olivia was delighted when Ellie's flight had finally landed. Ellie said, 'It's fantastic to see you!'</p>
                            </div>
                            <div class="space-y-4 mt-4 interactive-group">
                                <div>
                                    <label class="font-semibold text-slate-600">What problem do the characters have?</label>
                                    <input type="text" id="writing-q1" class="mt-1 w-full p-2 border-2 border-slate-200 rounded-lg" placeholder="Type your answer...">
                                </div>
                                <div>
                                    <label class="font-semibold text-slate-600">Find four adjectives that describe how Olivia felt.</label>
                                    <input type="text" id="writing-q2" class="mt-1 w-full p-2 border-2 border-slate-200 rounded-lg" placeholder="adjective 1, adjective 2, ...">
                                </div>
                            </div>
                        </div>
                         <div>
                            <h3 class="font-bold text-lg text-slate-700">Your Writing Task</h3>
                            <div class="my-2 p-4 bg-slate-100 rounded-lg border">
                                <p>Your English teacher has asked you to write a story. Your story must begin with this sentence:</p>
                                <p class="font-semibold mt-2">"Matthew felt excited as he waited for the train."</p>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-slate-700">Plan Your Story</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="font-semibold text-slate-600">Where and when is your story set?</label>
                                    <input type="text" class="mt-1 w-full p-2 border-2 border-slate-200 rounded-lg" placeholder="e.g., At a busy station on a sunny morning...">
                                </div>
                                 <div>
                                    <label class="font-semibold text-slate-600">What are the main events? (Beginning, middle, end)</label>
                                    <textarea rows="3" class="mt-1 w-full p-2 border-2 border-slate-200 rounded-lg" placeholder="First... Then... Finally..."></textarea>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-slate-700">Write Your Story (about 100 words)</h3>
                            <textarea id="story-writing-area" rows="8" class="mt-2 w-full p-3 border-2 border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-400 focus:border-teal-400 transition" placeholder="Matthew felt excited as he waited for the train..."></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Check Answers Section -->
        <div class="card mt-8">
            <div class="card-content text-center">
                <button id="check-answers" class="bg-teal-600 text-white font-bold py-4 px-10 rounded-xl hover:bg-teal-700 transition-all transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-teal-300 text-lg">
                    Check My Answers!
                </button>
                <div id="results" class="mt-6 text-center text-xl font-medium"></div>
                <button id="reset" class="text-sm text-slate-500 hover:text-slate-700 mt-4">Reset</button>
            </div>
        </div>
    </div>

    <!-- Vocab Info Modal -->
    <div id="modal-backdrop">
        <div id="modal-content"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const vocabData = {
                awful: { opposite: 'fantastic', ipa: '/Àà…îÀêf…ôl/', definition: 'Very bad or unpleasant.' },
                funny: { opposite: 'serious', ipa: '/Ààf åni/', definition: 'Causing laughter or amusement.' },
                generous: { opposite: 'mean', ipa: '/Ààd íen…ôr…ôs/', definition: 'Willing to give more than is usual.' },
                miserable: { opposite: 'cheerful', ipa: '/Ààm…™zr…ôbl/', definition: 'Very unhappy or uncomfortable.' },
                ashamed: { opposite: 'proud', ipa: '/…ôÀà Ée…™md/', definition: 'Feeling embarrassed or guilty.' },
                nervous: { opposite: 'relaxed', ipa: '/Ààn…úÀêv…ôs/', definition: 'Easily anxious or worried.' },
                dull: { opposite: 'spectacular', ipa: '/d ål/', definition: 'Not interesting or exciting; boring.' },
                strange: { opposite: 'ordinary', ipa: '/stre…™nd í/', definition: 'Unusual or surprising.' },
                cheerful: { opposite: 'miserable', ipa: '/Ààt É…™…ôf…ôl/', definition: 'Noticeably happy and optimistic.' },
                spectacular: { opposite: 'dull', ipa: '/spekÀàt√¶kj…ôl…ô(r)/', definition: 'Very impressive or exciting.' },
                fantastic: { opposite: 'awful', ipa: '/f√¶nÀàt√¶st…™k/', definition: 'Extraordinarily good or attractive.' },
                mean: { opposite: 'generous', ipa: '/miÀên/', definition: 'Not willing to give or share things.' },
                ordinary: { opposite: 'strange', ipa: '/Àà…îÀêdnri/', definition: 'With no special or distinctive features.' },
                proud: { opposite: 'ashamed', ipa: '/pra äd/', definition: 'Feeling pleasure from one\'s own achievements.' },
                relaxed: { opposite: 'nervous', ipa: '/r…™Ààl√¶kst/', definition: 'Free from tension and anxiety.' },
                serious: { opposite: 'funny', ipa: '/Ààs…™…ôri…ôs/', definition: 'Not joking or funny.' }
            };
            const writingAnswers = {
                'writing-q1': "ellie's plane can't take off because of fog",
                'writing-q2': ['excited', 'disappointed', 'miserable', 'delighted']
            };

            const draggableContainer = document.getElementById('draggable-container');
            const dropContainer = document.getElementById('drop-container');
            
            const boxA = ['awful', 'funny', 'generous', 'miserable', 'ashamed', 'nervous', 'dull', 'strange'];
            const boxB = ['cheerful', 'spectacular', 'fantastic', 'mean', 'ordinary', 'proud', 'relaxed', 'serious'];
            
            boxA.sort(() => Math.random() - 0.5);
            boxB.sort(() => Math.random() - 0.5);

            boxA.forEach(word => {
                const div = document.createElement('div');
                div.innerHTML = `<span>${word}</span><button class="vocab-info-btn" data-word="${word}">‚ìò</button>`;
                div.classList.add('draggable');
                div.setAttribute('draggable', true);
                div.id = `drag-${word}`;
                draggableContainer.appendChild(div);
            });

            boxB.forEach(word => {
                const dropRow = document.createElement('div');
                dropRow.className = 'flex items-center gap-2';
                dropRow.innerHTML = `
                    <div class="drop-zone w-full" data-match="${vocabData[word].opposite}"></div>
                    <span>${word}<button class="vocab-info-btn" data-word="${word}">‚ìò</button></span>
                `;
                dropContainer.appendChild(dropRow);
            });

            const allInputs = document.querySelectorAll('.interactive-group input, .interactive-group .drop-zone');
            const progressBar = document.getElementById('progress-bar');
            
            function updateProgress() {
                let answered = 0;
                allInputs.forEach(el => {
                    if (el.classList.contains('drop-zone') && el.children.length > 0) answered++;
                    else if (el.tagName === 'INPUT' && el.value.trim() !== '') answered++;
                });
                const percentage = allInputs.length > 0 ? (answered / allInputs.length) * 100 : 0;
                progressBar.style.width = `${percentage}%`;
            }

            function checkAnswers() {
                let score = 0;
                let total = 0;

                document.querySelectorAll('.drop-zone').forEach(zone => {
                    total++;
                    zone.classList.remove('correct-drop', 'incorrect-drop');
                    const droppedEl = zone.querySelector('.draggable');
                    if (droppedEl) {
                        const droppedWord = droppedEl.textContent.replace('‚ìò', '').trim();
                        if (droppedWord === zone.dataset.match) {
                            score++;
                            zone.classList.add('correct-drop');
                        } else {
                            zone.classList.add('incorrect-drop');
                        }
                    } else {
                        zone.classList.add('incorrect-drop');
                    }
                });
                
                const q1Input = document.getElementById('writing-q1');
                total++;
                q1Input.classList.remove('correct', 'incorrect');
                if (q1Input.value.toLowerCase().includes("plane") && q1Input.value.toLowerCase().includes("fog")) {
                    score++;
                    q1Input.classList.add('correct');
                } else {
                    q1Input.classList.add('incorrect');
                }

                const q2Input = document.getElementById('writing-q2');
                total++;
                q2Input.classList.remove('correct', 'incorrect');
                const userAdjectives = q2Input.value.toLowerCase().split(',').map(s => s.trim()).filter(Boolean);
                let correctAdjectives = 0;
                writingAnswers['writing-q2'].forEach(adj => {
                    if (userAdjectives.includes(adj)) correctAdjectives++;
                });
                if (correctAdjectives === 4) {
                    score++;
                    q2Input.classList.add('correct');
                } else {
                    q2Input.classList.add('incorrect');
                }

                document.getElementById('results').innerHTML = `You scored <span class="font-bold text-teal-600">${score}</span> out of <span class="font-bold">${total}</span> on the vocabulary and comprehension questions.`;
            }

            function reset() {
                document.querySelectorAll('.drop-zone').forEach(zone => {
                    zone.classList.remove('correct-drop', 'incorrect-drop');
                    if (zone.firstChild) draggableContainer.appendChild(zone.firstChild);
                });
                document.querySelectorAll('.interactive-group input').forEach(input => {
                    input.value = '';
                    input.classList.remove('correct', 'incorrect');
                });
                document.getElementById('results').innerHTML = '';
                updateProgress();
            }

            // Tab functionality
            const tabButtons = document.getElementById('tab-buttons');
            const tabPanels = document.getElementById('tab-panels');
            tabButtons.addEventListener('click', e => {
                if (e.target.tagName === 'BUTTON') {
                    tabButtons.querySelector('.active').classList.remove('active');
                    e.target.classList.add('active');
                    tabPanels.querySelector('.active').classList.remove('active');
                    tabPanels.querySelector(`#${e.target.dataset.tab}-panel`).classList.add('active');
                }
            });

            // Modal functionality
            const modalBackdrop = document.getElementById('modal-backdrop');
            const modalContent = document.getElementById('modal-content');
            document.addEventListener('click', e => {
                if (e.target.classList.contains('vocab-info-btn')) {
                    const word = e.target.dataset.word;
                    const data = vocabData[word];
                    modalContent.innerHTML = `
                        <div class="flex justify-between items-center">
                            <h3 class="text-2xl font-bold text-slate-800">${word}</h3>
                            <button id="close-modal" class="text-2xl font-bold text-slate-400 hover:text-slate-600">&times;</button>
                        </div>
                        <p class="text-slate-500 mt-1">${data.ipa}</p>
                        <p class="text-slate-700 mt-4">${data.definition}</p>
                        <button id="speak-btn" data-word="${word}" class="mt-4 bg-teal-100 text-teal-700 px-4 py-2 rounded-lg font-semibold flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg>
                            Speak
                        </button>
                    `;
                    modalBackdrop.style.display = 'flex';
                }
                if (e.target.id === 'close-modal' || e.target === modalBackdrop) {
                    modalBackdrop.style.display = 'none';
                }
                if (e.target.id === 'speak-btn') {
                    const utterance = new SpeechSynthesisUtterance(e.target.dataset.word);
                    speechSynthesis.speak(utterance);
                }
            });

            // Drag and Drop Logic
            document.addEventListener('dragstart', e => {
                if (e.target.classList.contains('draggable')) {
                    e.target.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', e.target.id);
                }
            });
            document.addEventListener('dragend', e => {
                if (e.target.classList.contains('draggable')) e.target.classList.remove('dragging');
            });
            document.querySelectorAll('.drop-zone, #draggable-container').forEach(container => {
                container.addEventListener('dragover', e => {
                    e.preventDefault();
                    if(container.classList.contains('drop-zone')) container.classList.add('drag-over');
                });
                container.addEventListener('dragleave', e => {
                    if(container.classList.contains('drop-zone')) container.classList.remove('drag-over');
                });
                container.addEventListener('drop', e => {
                    e.preventDefault();
                    if(container.classList.contains('drop-zone')) container.classList.remove('drag-over');
                    const draggedId = e.dataTransfer.getData('text/plain');
                    const draggedEl = document.getElementById(draggedId);
                    if (container.firstChild) draggableContainer.appendChild(container.firstChild);
                    container.appendChild(draggedEl);
                    updateProgress();
                });
            });

            document.querySelectorAll('input[type="text"]').forEach(input => input.addEventListener('input', updateProgress));
            document.getElementById('check-answers').addEventListener('click', checkAnswers);
            document.getElementById('reset').addEventListener('click', reset);
            
            updateProgress();
        });
    </script>
</body>
</html>
